!function(o,r){"use strict";var c=!1,d=1,u=!1;o.bind("ready",function(t){var n=r("#customize-control-loftocean_instagram_clear_cache input[type=button]");r("body").on("click","#customize-control-loftocean_instagram_clear_cache input[type=button]",function(t){var e,o;t.preventDefault(),wpApiSettings&&wpApiSettings.root&&(e=r(this),o=loftoceanInstagram.i18nMessage.clear,e.val(o.process).attr("disabled","disabled"),t=wpApiSettings.root+"loftocean/v1/clear-instagram-cache/",r.get(t).done(function(){e.val(o.done).removeAttr("disabled")}).fail(function(){e.val(o.fail),setTimeout(function(){e.val(o.done).removeAttr("disabled")},5e3)}))}).on("click","#customize-control-loftocean_instagram_download_images input[type=button]",function(t){var e,o,a;t.preventDefault(),wpApiSettings&&wpApiSettings.root&&(e=r(this),o=loftoceanInstagram.i18nMessage.download,e.val(o.process).attr("disabled","disabled"),n.attr("disabled","disabled"),t=wpApiSettings.root+"loftocean/v1/get-latest-instagram/",a=wpApiSettings.root+"loftocean/v1/download-instagram-feed/",r.get(t).done(function(t){t.success?(c=t.data,u=c.length,function e(o,t,a,n,i){var l=u<=t+d,s=t+d,t=c.slice(t,s);r.get(o+t.join(",")).done(function(t){l?r.get(wpApiSettings.root+"loftocean/v1/clear-instagram-feed-storage/").always(function(){n.removeAttr("disabled"),a.val(i.done).removeAttr("disabled"),u=c=!1}):e(o,s,a,n,i)}).fail(function(){n.removeAttr("disabled"),a.val(i.fail),setTimeout(function(){a.val(i.done).removeAttr("disabled")},5e3),u=c=!1})}(a,0,e,n,o)):(e.val(o.noFeedFound),setTimeout(function(){e.val(o.done).removeAttr("disabled")},5e3))}).fail(function(){n.removeAttr("disabled"),e.val(o.fail),setTimeout(function(){e.val(o.done).removeAttr("disabled")},5e3)}))});var e=o.control("loftocean_auto_download_instagram_images_schedule");e&&o("loftocean_enable_auto_download_instagram_images",function(t){t.bind(function(t){t?e.container.show():e.container.hide()})})})}(wp.customize,jQuery);
