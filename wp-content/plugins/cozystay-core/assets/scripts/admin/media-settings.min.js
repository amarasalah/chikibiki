!function(d){"use strict";var i=wp.media;i.view.Settings.Gallery=i.view.Settings.Gallery.extend({render:function(){var l=this.$el;return i.view.Settings.prototype.render.apply(this,arguments),l.append(i.template("loftocean-gallery-settings")),i.gallery.defaults.type="default",i.gallery.defaults.slider_ratio="ratio-3-2",i.gallery.defaults.justified_row_height=120,i.gallery.defaults.justified_last_row_style="nojustify",i.gallery.defaults.justified_margin=1,this.update("type"),this.update("slider_ratio"),this.update("justified_row_height"),this.update("justified_last_row_style"),this.update("justified_margin"),l.find("select[name=type]").on("change",function(){var e=d(this).val(),t=l.find("select[name=columns]").closest("label.setting"),i=l.find("select.link-to").closest("label.setting"),a=l.find("select[name=size]").closest("label.setting"),s=l.find(".gallery-type-slider"),n=l.find(".gallery-type-justified");s.add(n).hide(),"default"===e?(t.show(),i.show(),a.show()):(t.hide(),i.hide(),a.hide(),("slider"==e?s:n).show())}).change(),this},update:function(e){i.view.Settings.prototype.update.apply(this,arguments);var t=this.model.get(e)||i.gallery.defaults[e],e=this.$('[data-setting="'+e+'"]');e.length&&e.is('input[type="number"]')&&!e.is(":focus")&&e.val(t)}}),i.view.Settings.AttachmentDisplay=i.view.Settings.AttachmentDisplay.extend({render:function(){var e=this.options.attachment,t=this.$el;return i.view.settings.defaultProps.image_container="original",e&&_.extend(this.options,{sizes:e.get("sizes"),type:e.get("type"),image_container:e.get("image_container")}),i.view.Settings.prototype.render.call(this),t.find(".setting.align").before(i.template("loftocean-display-settings")),this.update.apply(this,["image_container"]),this.updateLinkTo(),this}}),wp.media.editor.send.attachment=function(i,e){var a,t,s=e.caption;return wp.media.view.settings.captions||delete e.caption,i=wp.media.string.props(i,e),a={id:e.id,post_content:e.description,post_excerpt:s},i.linkUrl&&(a.url=i.linkUrl),"image"===e.type?(t=wp.media.string.image(i),_.each({align:"align",size:"image-size",alt:"image_alt",image_container:"image_container"},function(e,t){i[t]&&(a[e]=i[t])})):"video"===e.type?t=wp.media.string.video(i,e):"audio"===e.type?t=wp.media.string.audio(i,e):(t=wp.media.string.link(i),a.post_title=i.title),wp.media.post("send-attachment-to-editor",{nonce:wp.media.view.settings.nonce.sendToEditor,attachment:a,html:t,post_id:wp.media.view.settings.post.id})}}(jQuery);
