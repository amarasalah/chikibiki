!function(c){"undefined"!=typeof elementor&&"undefined"!==elementorCommon&&elementor.on("preview:loaded",function(){var o,e=c("#tmpl-elementor-add-section"),t=e.text().replace('<div class="elementor-add-section-drag-title','<div class="elementor-add-section-area-button loftocean-library-modal-btn" title="CozyStay Templates">CozyStay Templates</div><div class="elementor-add-section-drag-title');function n(e,t){"none"!=e.css("display")&&(t=t.offset().top+t.outerHeight()+30,e.css("margin-top",t-e.offset().top))}function i(e){var t=(e=e.css("margin-top","").not(".invisible-item")).length;e.css("margin-top","");for(var a=3;a<t;a++)n(e.eq(a),e.eq(a-3))}function m(){c("#loftocean-library-modal #elementor-template-library-templates").hide(),c("#loftocean-library-modal .elementor-loader-wrapper").show()}function s(){c("#loftocean-library-modal #elementor-template-library-templates").show(),c("#loftocean-library-modal .elementor-loader-wrapper").hide()}e.text(t),c(elementor.$previewContents[0].body).on("click",".loftocean-library-modal-btn",function(){o?o.show():((o=elementorCommon.dialogsManager.createWidget("lightbox",{id:"loftocean-library-modal",headerMessage:c("#tmpl-elementor-loftocean-library-modal-header").html(),message:c("#tmpl-elementor-loftocean-library-modal").html(),className:"elementor-templates-modal",closeButton:!0,draggable:!1,hide:{onOutsideClick:!0,onEscKeyPress:!0},position:{my:"center",at:"center"}})).show(),m(),c.ajax({url:loftoceanElementorLibrary.demoAjaxUrl,method:"GET",dataType:"json",success:function(e){var a,t,l,r;e&&e.status&&"success"==e.status&&e.defaultTab?(a=wp.template("elementor-loftocean-library-modal-item"),t=wp.template("elementor-loftocean-library-tab-title-item"),r=wp.template("elementor-loftocean-library-tab-content"),l=wp.template("elementor-loftocean-library-modal-order"),c(t(e.tabs)).appendTo(c("#loftocean-library-modal #elementor-template-library-header-menu")),c(r(e.tabs)).appendTo(c("#loftocean-library-modal #elementor-template-library-templates")),_.each(e.library,function(e,t){e.elements=e.elements.reverse(),c(a(e)).appendTo(c("#loftocean-library-modal .elementor-template-library-tab-content.elementor-template-library-"+t+" .elementor-template-library-templates-container")),c(l(e)).appendTo(c("#loftocean-library-modal .elementor-template-library-tab-content.elementor-template-library-"+t+" .elementor-template-library-filter-toolbar-remote"))}),i(c("#loftocean-library-modal #elementor-template-library-templates").children().first()),c(window).resize(function(){var e=c("#loftocean-library-modal #elementor-template-library-templates").children(),t=e.filter(".show");i((t.length?t:e.first()).find(".elementor-template-library-templates-container").children())}),c("#loftocean-library-modal #elementor-template-library-templates img").on("load",function(){var e=c(this).closest(".elementor-template-library-templates-container"),t=e.children(),a=c(this).closest(".elementor-template-library-template"),l=t.length,a=t.index(a),a=3*Math.floor(a/3);if(e.parent().hasClass("active-tab"))for(var r=Math.max(a,3);r<l;r++)t.eq(r).css("margin-top",""),n(t.eq(r),t.eq(r-3))}),c("#loftocean-library-modal").on("click",".elementor-template-library-template-insert",function(){m();var e=c("#loftocean-library-modal #elementor-template-library-templates .cs-notice");return e.length&&e.remove(),elementorCommon.ajax.addRequest("get_template_data",{data:{source:"loftocean",edit_mode:!0,display:!0,template_id:c(this).data("id"),with_page_settings:!1},success:function(e){e&&e.content?(elementor.getPreviewView().addChildModel(e.content),o.hide(),setTimeout(function(){s()},2e3),c("#elementor-panel-saver-button-publish").removeClass("elementor-disabled"),c("#elementor-panel-saver-button-save-options").removeClass("elementor-disabled")):(c("<div>",{class:"cs-notice cs-error",text:"The element can't be loaded from the server."}).prependTo(c("#loftocean-library-modal #elementor-template-library-templates")),s())},error:function(){c("<div>",{class:"cs-notice cs-error",text:"The element can't be loaded from the server."}).prependTo(c("#loftocean-library-modal #elementor-template-library-templates")),s()}})}).on("click",".elementor-templates-modal__header__close",function(){o.hide(),s()}).on("click",".elementor-template-library-menu-item",function(){var e;c(this).hasClass("elementor-active")||(e=c("#loftocean-library-modal .elementor-template-library-tab-content").filter("."+c(this).data("tab")),c(this).siblings().removeClass("elementor-active"),c(this).addClass("elementor-active"),c("#loftocean-library-modal .elementor-template-library-tab-content").hide().removeClass("active-tab").filter("."+c(this).data("tab")).show().addClass("active-tab"),i(e.find(".elementor-template-library-templates-container").children()))}),c("#loftocean-library-modal .elementor-template-library-filter-text-wrapper input").on("keyup",function(){var l=c(this).val().toLowerCase(),e=c(this).parents(".elementor-template-library-tab-content").first();e.find(".elementor-template-library-template-block").each(function(){var e=c(this),t=e.data("title").toLowerCase(),a=e.data("slug").toLowerCase();-1<t.indexOf(l)||-1<a.indexOf(l)?e.show().removeClass("invisible-item"):e.hide().addClass("invisible-item")}),i(e.find(".elementor-template-library-template-block").not(".invisible-item"))}),c("#loftocean-library-modal .elementor-template-library-filter-select").on("change",function(){var a=c(this).val(),e=c(this).parents(".elementor-template-library-tab-content").first();e.find(".elementor-template-library-template-block").each(function(){var e=c(this),t=e.data("tag").toLowerCase();"all"===a||-1<t.indexOf(a)?e.show().removeClass("invisible-item"):e.hide().addClass("invisible-item")}),i(e.find(".elementor-template-library-template-block").not(".invisible-item"))}),r=e.defaultTab,(e=c("#loftocean-library-modal .elementor-template-library-menu-item")).length&&((r=e.filter("[data-tab=elementor-template-library-"+r+"]")).length?r:e.first()).trigger("click")):c("<div>",{class:"cs-notice cs-error",text:"The library can't be loaded from the server."}).prependTo(c("#loftocean-library-modal #elementor-template-library-templates")),s()},error:function(){c("<div>",{class:"cs-notice cs-error",text:"The library can't be loaded from the server."}).prependTo(c("#loftocean-library-modal #elementor-template-library-templates")),s()}}))})})}(jQuery);
